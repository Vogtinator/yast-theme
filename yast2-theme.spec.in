@HEADER-COMMENT@

@HEADER@
BuildRequires:	yast2-devtools pkg-config yast2-core yast2 update-desktop-files
BuildArchitectures: noarch
Summary:	-
%description
-

%package openSUSE

Summary:	-
Version:	@VERSION@
Group:		System/YaST
Provides:	yast2_theme yast2-theme-UnitedLinux
PreReq:		/bin/ln
Obsoletes:	yast2-theme-SuSELinux
Obsoletes:	yast2-theme-UnitedLinux

%description openSUSE
-


@PREP@

@BUILD@

@INSTALL@
cp -R "$RPM_BUILD_ROOT/@docdir@" "$RPM_BUILD_ROOT/@docdir@-openSUSE"
rm -rf "$RPM_BUILD_ROOT/@docdir@"
#
# make icons available to GNOME control center (hicolor theme)
# (bug #166008)
mkdir -p $RPM_BUILD_ROOT/usr/share/icons/hicolor/22x22/apps
mkdir -p $RPM_BUILD_ROOT/usr/share/icons/hicolor/32x32/apps
mkdir -p $RPM_BUILD_ROOT/usr/share/icons/hicolor/48x48/apps
cd $RPM_BUILD_ROOT/@themedir@/openSUSE/icons
for dir in 22x22 32x32 48x48; do
    cd $RPM_BUILD_ROOT/@themedir@/openSUSE/icons/$dir/apps
    icons=$(ls *.png)
    cd $RPM_BUILD_ROOT/usr/share/icons/hicolor/$dir/apps
    for icon in $icons; do
        ln -s ../../../../YaST2/theme/openSUSE/icons/$dir/apps/$icon .
    done
done


@CLEAN@

%post openSUSE
cd @themedir@
ln -snf openSUSE current

%files openSUSE
%defattr(-,root,root)
%dir @themedir@
%dir @themedir@/openSUSE
%dir /usr/share/icons/hicolor
%dir /usr/share/icons/hicolor/22x22
%dir /usr/share/icons/hicolor/22x22/apps
%dir /usr/share/icons/hicolor/32x32
%dir /usr/share/icons/hicolor/32x32/apps
%dir /usr/share/icons/hicolor/48x48
%dir /usr/share/icons/hicolor/48x48/apps
@themedir@/openSUSE/*
/usr/share/icons/hicolor/22x22/apps/*
/usr/share/icons/hicolor/32x32/apps/*
/usr/share/icons/hicolor/48x48/apps/*
@themedir@/openSUSE/testpage/*
%doc @docdir@-openSUSE

